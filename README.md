# Helm Charts for Crossplane

There 3 helm charts for Crossplane with following purposes:

## crossplane

This is the main chart which contains both crossplane types (a.k.a. CRDs), roles (RBAC) and controllers. This chart should be
used for regular installations (i.e. not hosted/in host aware mode) as documented in [installation docs](../../docs/install-crossplane.md).

## crossplane-types

This chart contains type definitions (a.k.a. CRDs) and roles for operators. This chart should be used for hosted/host
aware package manager mode and should be deployed on Tenant Kubernetes API Server. For more details, please see related
[design doc](../../design/one-pager-host-aware-stack-manager.md).

## crossplane-controllers

This chart contains controller deployments for `crossplane` and `package-manager`. This chart should be used for hosted/host
aware package manager mode and should be deployed on Host Kubernetes Cluster. For more details, please see related
[design doc](../../design/one-pager-host-aware-stack-manager.md).

## Making changes in helm charts

Some of the manifests inside helm charts are auto generated with `make generate`. Templates inside `crossplane-types`
and  `crossplane-controller` charts are authoritative and main `crossplane` chart autogenerated using them.

If you want to make a change in `crossplane` helm chart, please consider following:

- Do not make any direct change on any CRD file, they are auto generated via kubebuilder. Change related go file and run
`make generate`
- If the file to change exists in `crossplane-types/templates`, change there and run `make generate`. Change should be
reflected to `crossplane` helm chart. 
- If the file to change exists in `crossplane-controller/templates`, change there and run `make generate`. Change should
be reflected to `crossplane` helm chart. 
- If you want to add a new manifests, please check [this design doc](https://github.com/crossplane/crossplane/blob/master/design/one-pager-host-aware-stack-manager.md#crossplane-helm-chart-changes)
to decide in which chart your manifest should go to.
